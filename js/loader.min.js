var FF=window.FF||{};!function(a,b){var c={};FF.loader=function(){var a,c,d,e=b.querySelectorAll(".formframe-container");for(a=0;a<e.length;a++)c=FF.getSettings(e[a]),d=b.createElement("iframe"),d.src=FF.constructUrl(c),d.scrolling="no",d.frameBorder="0",d.id=c.__ffid,c.width&&(d.width=c.width),e[a].appendChild(d)},FF.listener=function(a){var d=a[a.message?"message":"data"];FF.settings.baseUrl.substring(0,a.origin.length)===a.origin&&("string"==typeof d&&(d=JSON.parse(d)),d.triggeredBy&&"formframe"===d.triggeredBy&&(d.height&&(b.getElementById(d.__ffid).height=d.height),c.triggerEvent(d)))},FF.messenger=function(a,b){b.triggeredBy="formframe",a.contentWindow.postMessage(JSON.stringify(b),FF.settings.baseUrl)},FF.getSettings=function(a){var b,c,d=FF.drupalDynamicSettings||{},e={};d.width="width",d.formName="formName";for(b in d)(c=a.querySelector('param[name="'+b+'"]'))&&(e[d[b]]=c.value||null);return e.__ffid="ffid"+Math.random().toString().replace("0.",""),e},FF.constructUrl=function(a){var b,c=a.formName,d="?";for(b in a)"width"!==b&&"formName"!==b&&(d+=b+"="+encodeURI(a[b])+"&");return FF.settings.baseUrl+"form/frame/"+c+d.substr(0,d.length-1)},FF.initialize=function(){FF.settings=FF.settings||{},FF.settings.initialized||(c.initBaseUrl(),c.initEventHandler(),a[FF.settings.handler](FF.settings.handleMessage,FF.listener,!1),FF.loader(),FF.settings.initialized=!0)},c.initBaseUrl=function(){var a,c,d,e,f=b.getElementsByTagName("script"),g="loader.js",h="/form/frame/",i=FF.drupalDynamicPrefix||"/";for(e=f.length-1;e>=0;--e)if(a=f[e].src,c=a.length,d=g.length,a.substr(c-d)===g){FF.settings.baseUrl=a.substr(0,c-d).replace(h,"")+i;break}},c.initEventHandler=function(){FF.settings.handler=a.addEventListener?"addEventListener":"attachEvent",FF.settings.handleMessage=a.addEventListener?"message":"onmessage"},c.triggerEvent=function(a){var c="formframe:message",d=new CustomEvent(c,{detail:a});b.createEvent?b.dispatchEvent(d):b.fireEvent("on"+c,d)}}(window,document);try{new CustomEvent("?")}catch(o_O){this.CustomEvent=function(a,b){function c(c,e){var f=document.createEvent(a);return null!=c?d.call(f,c,(e||(e=b)).bubbles,e.cancelable,e.detail):f.initCustomEvent=d,f}function d(b,c,d,e){this["init"+a](b,c,d,e),"detail"in this||(this.detail=e)}return c}(this.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}!function(){FF.initialize()}();