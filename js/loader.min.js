window.FF=window.FF||{};
(function(g,f){var e={};FF.loader=function(){var b=f.querySelectorAll(".formframe-container"),a,c,d;for(a=0;a<b.length;a++)c=FF.getSettings(b[a]),d=f.createElement("iframe"),d.src=FF.constructUrl(c),d.scrolling="no",d.frameborder="0",d.id=c.__ffid,c.width&&(d.width=c.width),b[a].appendChild(d)};FF.listener=function(b){var a=b[b.message?"message":"data"];FF.settings.baseUrl.substring(0,b.origin.length)===b.origin&&("string"===typeof a&&(a=JSON.parse(a)),a.triggeredBy&&"formframe"===a.triggeredBy&&
(a.height&&(f.getElementById(a.__ffid).height=a.height),e.triggerEvent(a)))};FF.messenger=function(b,a){a.triggeredBy="formframe";b.contentWindow.postMessage(JSON.stringify(a),FF.settings.baseUrl)};FF.getSettings=function(b){var a=FF.drupalDynamicSettings||{},c={},d,f;a.width="width";a.formName="formName";for(d in a)if(f=b.querySelector('param[name="'+d+'"]'))c[a[d]]=f.value||null;c.__ffid="ffid"+Math.random().toString().replace("0.","");return c};FF.constructUrl=function(b){var a=b.formName,c="?",
  d;for(d in b)"width"!==d&&"formName"!==d&&(c+=d+"="+encodeURI(b[d])+"&");return FF.settings.baseUrl+"form/frame/"+a+c.substr(0,c.length-1)};FF.initialize=function(){FF.settings=FF.settings||{};FF.settings.initialized||(e.initBaseUrl(),e.initEventHandler(),g[FF.settings.handler](FF.settings.handleMessage,FF.listener,!1),FF.loader(),FF.settings.initialized=!0)};e.initBaseUrl=function(){var b=f.getElementsByTagName("script"),a=FF.drupalDynamicPrefix||"/",c,d,e;for(e=b.length-1;0<=e;--e)c=b[e].src,d=
  c.length,"loader.js"===c.substr(d-9)&&(FF.settings.baseUrl="http://"+c.substr(0,d-9).split("/")[2]+a)};e.initEventHandler=function(){FF.settings.handler=g.addEventListener?"addEventListener":"attachEvent";FF.settings.handleMessage=g.addEventListener?"message":"onmessage"};e.triggerEvent=function(b){b=new CustomEvent("formframe:message",{detail:b});f.createEvent?f.dispatchEvent(b):f.fireEvent("onformframe:message",b)}})(window,document);
try{new CustomEvent("?")}catch(o_O){this.CustomEvent=function(g,f){function e(b,a,c,d){this["init"+g](b,a,c,d);"detail"in this||(this.detail=d)}return function(b,a){var c=document.createEvent(g);null!=b?e.call(c,b,(a||(a=f)).bubbles,a.cancelable,a.detail):c.initCustomEvent=e;return c}}(this.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}(function(g){g.initialize()})(window.FF);
