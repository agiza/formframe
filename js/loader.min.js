window.FF=window.FF||{};
(function(h,f,b){var g={};b.loader=function(){var c=f.querySelectorAll(".formframe-container"),a,e,d;for(a=0;a<c.length;a++)e=b.getSettings(c[a]),d=f.createElement("iframe"),d.src=b.constructUrl(e),d.scrolling="no",d.frameborder="0",d.id=e.ffid,e.width&&(d.width=e.width),c[a].appendChild(d)};b.listener=function(c){var a=c[c.message?"message":"data"];b.settings.baseUrl.substring(0,c.origin.length)===c.origin&&("string"===typeof a&&(a=JSON.parse(a)),a.triggeredBy&&"formframe"===a.triggeredBy&&(a.height&&
(f.getElementById(a.__ffid).height=a.height),g.triggerEvent(a)))};b.messenger=function(c,a){a.triggeredBy="formframe";c.contentWindow.postMessage(JSON.stringify(a),b.settings.baseUrl)};b.getSettings=function(c){var a={ffid:"ffid"+Math.random().toString().replace("0.",""),formName:null,bodyBackgroundColor:null,inputBackgroundColor:null,width:null},b,d;for(b in a)if(d=c.querySelector('param[name="'+b+'"]'))a[b]=d.value||null;return a};b.constructUrl=function(c){return this.settings.baseUrl+"/form/frame/"+
c.formName+"?__ffid="+c.ffid};b.initialize=function(){b.settings=b.settings||{};b.settings.initialized||(g.initBaseUrl(),g.initEventHandler(),h[b.settings.handler](b.settings.handleMessage,b.listener,!1),b.loader(),b.settings.initialized=!0)};g.initBaseUrl=function(){var c=f.getElementsByTagName("script"),a,e,d;for(d=c.length-1;0<=d;--d)a=c[d].src,e=a.length,"loader.js"===a.substr(e-9)&&(b.settings.baseUrl="http://"+a.substr(0,e-9).split("/")[2])};g.initEventHandler=function(){b.settings.handler=
  h.addEventListener?"addEventListener":"attachEvent";b.settings.handleMessage=h.addEventListener?"message":"onmessage"};g.triggerEvent=function(c){c=new CustomEvent("formframe:message",{detail:c});f.createEvent?f.dispatchEvent(c):f.fireEvent("onformframe:message",c)}})(window,document,window.FF);
try{new CustomEvent("?")}catch(o_O){this.CustomEvent=function(h,f){function b(b,c,a,e){this["init"+h](b,c,a,e);"detail"in this||(this.detail=e)}return function(g,c){var a=document.createEvent(h);null!=g?b.call(a,g,(c||(c=f)).bubbles,c.cancelable,c.detail):a.initCustomEvent=b;return a}}(this.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}(function(h){h.initialize()})(window.FF);
